{"ast":null,"code":"import _defineProperty from\"/Users/yze/WebstormProjects/Mern/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectDestructuringEmpty from\"/Users/yze/WebstormProjects/Mern/client/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js\";import _asyncToGenerator from\"/Users/yze/WebstormProjects/Mern/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/yze/WebstormProjects/Mern/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/yze/WebstormProjects/Mern/client/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useState}from'react';import{Formik,useField,useFormik}from'formik';import*as Yup from'yup';import{useNavigate}from\"react-router\";import{Badge,Button,Col,Container,Form,FormControl,Row,Stack}from\"react-bootstrap\";import'../question.css';import{string}from\"yup\";import{forEach}from\"react-bootstrap/ElementChildren\";import{nanoid}from'nanoid';import{NavLink}from\"react-router-dom\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function Questionnaire(){// const navigate = useNavigate();\nvar _React$useState=React.useState(Date.now()),_React$useState2=_slicedToArray(_React$useState,2),entryTime=_React$useState2[0],setEntryTime=_React$useState2[1];var navigate=useNavigate();// const [form, setForm] = useState({\n//     time: 0,\n//     ip: \"\",\n//     qMap:new Map,\n// });\nvar formik=useFormik({initialValues:{question0:{name:' ',ans:' '},question1:{name:' ',ans:' '},question2:{name:' ',ans:' '},question3:{name:' ',ans:' '},question4:{name:' ',ans:' '},question5:{name:' ',ans:' '},question6:{name:' ',ans:' '},question7:{name:' ',ans:' '},question8:{name:' ',ans:' '},question9:{name:' ',ans:' '}},validationSchema:Yup.object({question0:Yup.object({name:Yup.string().required(\"xxx\"),ans:Yup.string().min(3,\"Q1sss\").required(\"Q1 unchecked\")}).required(\"Q1xxx\"),question1:Yup.object({name:Yup.string().required(\"xxx\"),ans:Yup.string().min(3).required(\"Q2 unchecked\")}),question2:Yup.object({name:Yup.string().required(\"xxx\"),ans:Yup.string().min(3).required(\"Q3 unchecked\")}),question3:Yup.object({name:Yup.string().required(\"xxx\"),ans:Yup.string().min(3).required(\"Q4 unchecked\")}),question4:Yup.object({name:Yup.string().required(\"xxx\"),ans:Yup.string().min(3).required(\"Q5 unchecked\")}),question5:Yup.object({name:Yup.string().required(\"xxx\"),ans:Yup.string().min(3).required(\"Q6 unchecked\")}),question6:Yup.object({name:Yup.string().required(\"xxx\"),ans:Yup.string().min(3).required(\"Q7 unchecked\")}),question7:Yup.object({name:Yup.string().required(\"xxx\"),ans:Yup.string().min(3).required(\"Q8 unchecked\")}),question8:Yup.object({name:Yup.string().required(\"xxx\"),ans:Yup.string().min(3).required(\"Q9 unchecked\")}),question9:Yup.object({name:Yup.string().required(\"xxx\"),ans:Yup.string().min(3).required(\"Q10 unchecked\")})}),onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){var millis,temMap,i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:millis=Date.now()-entryTime;temMap=new Map();for(i=0;i<10;i++){temMap.set(values[\"question\"+i].name,values[\"question\"+i].ans);//assign value\n// console.log(temMap.get(values[\"question\"+i].name))\nformik.touched[\"question\"+i]=false;//reset formik values\n}temMap.set(\"id\",nanoid(11));temMap.set(\"time\",millis/1000);// setForm({time:millis,ip:\"8.8.8.8\", qMap:temMap});\nObject.keys(formik.initialValues).forEach(//reset formik values\nfunction(key){formik.initialValues[key].ans=\" \";formik.initialValues[key].name=\" \";});//http://localhost:5001\n_context.next=8;return fetch(\"/question/add\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(Object.fromEntries(temMap))}).catch(function(error){window.alert(error);return;});case 8:alert(\"Thank you, we have received your answer!\");alert(JSON.stringify(Object.fromEntries(temMap),null,2));//\n// alert(JSON.stringify(form, null, 2));\nsetFuns.forEach(function(func){func('');});navigate(\"/\");//back to home page after submit\ncase 12:case\"end\":return _context.stop();}}},_callee);}));function onSubmit(_x){return _onSubmit.apply(this,arguments);}return onSubmit;}()});var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),selectedID0=_React$useState4[0],setID0=_React$useState4[1];var _React$useState5=React.useState(\"\"),_React$useState6=_slicedToArray(_React$useState5,2),selectedID1=_React$useState6[0],setID1=_React$useState6[1];var _React$useState7=React.useState(\"\"),_React$useState8=_slicedToArray(_React$useState7,2),selectedID2=_React$useState8[0],setID2=_React$useState8[1];var _React$useState9=React.useState(\"\"),_React$useState10=_slicedToArray(_React$useState9,2),selectedID3=_React$useState10[0],setID3=_React$useState10[1];var _React$useState11=React.useState(\"\"),_React$useState12=_slicedToArray(_React$useState11,2),selectedID4=_React$useState12[0],setID4=_React$useState12[1];var _React$useState13=React.useState(\"\"),_React$useState14=_slicedToArray(_React$useState13,2),selectedID5=_React$useState14[0],setID5=_React$useState14[1];var _React$useState15=React.useState(\"\"),_React$useState16=_slicedToArray(_React$useState15,2),selectedID6=_React$useState16[0],setID6=_React$useState16[1];var _React$useState17=React.useState(\"\"),_React$useState18=_slicedToArray(_React$useState17,2),selectedID7=_React$useState18[0],setID7=_React$useState18[1];var _React$useState19=React.useState(\"\"),_React$useState20=_slicedToArray(_React$useState19,2),selectedID8=_React$useState20[0],setID8=_React$useState20[1];var _React$useState21=React.useState(\"\"),_React$useState22=_slicedToArray(_React$useState21,2),selectedID9=_React$useState22[0],setID9=_React$useState22[1];var setFuns=[setID0,setID1,setID2,setID3,setID4,setID5,setID6,setID7,setID8,setID9];var selectedIDs=[selectedID0,selectedID1,selectedID2,selectedID3,selectedID4,selectedID5,selectedID6,selectedID7,selectedID8,selectedID9];function Question(props){return/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formBasicEmail\",children:[/*#__PURE__*/_jsxs(Form.Label,{className:\"qTitle\",children:[\"Q\",props.qId+1,\": \",props.descri,formik.values[\"question\"+props.qId].ans<3&&formik.touched[\"question\"+props.qId]?/*#__PURE__*/_jsxs(Badge,{pill:true,bg:\"danger\",children:[\"Q\",props.qId+1,\" unchecked\"]}):null]}),/*#__PURE__*/_jsx(Container,{className:\"qCard\",children:/*#__PURE__*/_jsx(Row,{sm:4,md:4,children:['Strongly Agree','Agree','Slightly Agree','Neutral','Slightly Disagree','Disagree','Strongly Disagree'].map(function(ques){return/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Check,{type:\"radio\",id:\"\".concat(ques,\"+\").concat(props.qId),name:\"\".concat(ques,\"+\").concat(props.qId),label:\"\".concat(ques)//+${props.selectId}\n,checked:ques+props.qId===props.selectId,onChange:function onChange(){// formik.values[\"sq\"+props.qId]= ques;\nformik.values[\"question\"+props.qId].name=props.qName;//+props.qId\nformik.values[\"question\"+props.qId].ans=ques;setFuns[props.qId](ques+props.qId);}})},\"\".concat(ques,\"+\").concat(props.qId));})})})]});}var _useState=useState([]),_useState2=_slicedToArray(_useState,2),questions=_useState2[0],setQuestions=_useState2[1];var firstLoad=true;// This method fetches the records from the database.\nuseEffect(function(){if(!firstLoad){return;}setEntryTime(Date.now());firstLoad=false;function getQuestions(){return _getQuestions.apply(this,arguments);}function _getQuestions(){_getQuestions=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,message,records;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"/questionlist/\");case 2:response=_context2.sent;if(response.ok){_context2.next=7;break;}message=\"An error occured: \".concat(response.statusText);window.alert(message);return _context2.abrupt(\"return\");case 7:_context2.next=9;return response.json();case 9:records=_context2.sent;shuffleArray(records);setQuestions(records.slice(0,10));case 12:case\"end\":return _context2.stop();}}},_callee2);}));return _getQuestions.apply(this,arguments);}getQuestions();return;},[questions.length]);function shuffleArray(array){for(var i=array.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1));var temp=array[i];array[i]=array[j];array[j]=temp;}}function QuestionList(){return questions.map(function(question,index){return/*#__PURE__*/_jsx(Question,{descri:question.questiontext,qId:index,qName:question.varname,selectId:selectedIDs[index++]},question._id);});}function uncheckedQues(_ref){_objectDestructuringEmpty(_ref);return/*#__PURE__*/_jsx(Container,{children:[0,1,2,3,4,5,6,7,8,9].map(function(index){var _jsxs2;return formik.values[\"question\"+index].ans.length<3&&formik.touched[\"question\"+index]?/*#__PURE__*/_jsxs(Badge,(_jsxs2={pill:true,className:\"col mx-1 \"},_defineProperty(_jsxs2,\"pill\",true),_defineProperty(_jsxs2,\"bg\",\"danger\"),_defineProperty(_jsxs2,\"children\",[\"Q\",index+1,\" unchecked\"]),_jsxs2),index+1):null;})});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{className:\"btnBack\",variant:\"outline-success\",onClick:function onClick(){return navigate(\"/\");},children:\" Back Home\"}),/*#__PURE__*/_jsx(Form,{className:\"col-sm-12 col-md-12 mx-2\",onSubmit:formik.handleSubmit,children:/*#__PURE__*/_jsxs(Stack,{gap:2,children:[QuestionList(),uncheckedQues({formik:formik}),/*#__PURE__*/_jsx(Button,{variant:\"outline-success\",className:\"col-4 mx-auto my-4 \",type:\"submit\",children:\"Submit\"})]})})]});}","map":{"version":3,"sources":["/Users/yze/WebstormProjects/Mern/client/src/components/questionarie.js"],"names":["React","useEffect","useState","Formik","useField","useFormik","Yup","useNavigate","Badge","Button","Col","Container","Form","FormControl","Row","Stack","string","forEach","nanoid","NavLink","Questionnaire","Date","now","entryTime","setEntryTime","navigate","formik","initialValues","question0","name","ans","question1","question2","question3","question4","question5","question6","question7","question8","question9","validationSchema","object","required","min","onSubmit","values","millis","temMap","Map","i","set","touched","Object","keys","key","fetch","method","headers","body","JSON","stringify","fromEntries","catch","error","window","alert","setFuns","func","selectedID0","setID0","selectedID1","setID1","selectedID2","setID2","selectedID3","setID3","selectedID4","setID4","selectedID5","setID5","selectedID6","setID6","selectedID7","setID7","selectedID8","setID8","selectedID9","setID9","selectedIDs","Question","props","qId","descri","map","ques","selectId","qName","questions","setQuestions","firstLoad","getQuestions","response","ok","message","statusText","json","records","shuffleArray","slice","length","array","j","Math","floor","random","temp","QuestionList","question","index","questiontext","varname","_id","uncheckedQues","handleSubmit"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport {Formik, useField, useFormik} from 'formik';\nimport * as Yup from 'yup';\nimport {useNavigate} from \"react-router\";\nimport {Badge, Button, Col, Container, Form, FormControl, Row, Stack} from \"react-bootstrap\";\nimport '../question.css';\nimport {string} from \"yup\";\nimport {forEach} from \"react-bootstrap/ElementChildren\";\nimport { nanoid } from 'nanoid'\nimport {NavLink} from \"react-router-dom\";\n\nexport default function Questionnaire() {\n    // const navigate = useNavigate();\n    const [entryTime, setEntryTime] = React.useState(Date.now());\n    const navigate = useNavigate();\n    // const [form, setForm] = useState({\n    //     time: 0,\n    //     ip: \"\",\n    //     qMap:new Map,\n    // });\n\n    const formik = useFormik({\n        initialValues: {\n            question0:{\n                name:' ',\n                ans:' '\n            },\n            question1:{\n                name:' ',\n                ans:' '\n            },\n            question2:{\n                name:' ',\n                ans:' '\n            },\n            question3:{\n                name:' ',\n                ans:' '\n            },\n            question4:{\n                name:' ',\n                ans:' '\n            },\n            question5:{\n                name:' ',\n                ans:' '\n            },\n            question6:{\n                name:' ',\n                ans:' '\n            },\n            question7:{\n                name:' ',\n                ans:' '\n            },\n            question8:{\n                name:' ',\n                ans:' '\n            },\n            question9:{\n                name:' ',\n                ans:' '\n            },\n        },\n        validationSchema: Yup.object({\n            question0: Yup.object({\n                name:Yup.string().required(\"xxx\"),\n                ans: Yup.string().min(3,\"Q1sss\").required(\"Q1 unchecked\"),\n            }).required(\"Q1xxx\"),\n\n            question1: Yup.object({\n                name:Yup.string().required(\"xxx\"),\n                ans: Yup.string().min(3).required(\"Q2 unchecked\"),\n            }),\n            question2: Yup.object({\n                name:Yup.string().required(\"xxx\"),\n                ans: Yup.string().min(3).required(\"Q3 unchecked\"),\n            }),\n            question3: Yup.object({\n                name:Yup.string().required(\"xxx\"),\n                ans: Yup.string().min(3).required(\"Q4 unchecked\"),\n            }),\n            question4: Yup.object({\n                name:Yup.string().required(\"xxx\"),\n                ans: Yup.string().min(3).required(\"Q5 unchecked\"),\n            }),\n            question5: Yup.object({\n                name:Yup.string().required(\"xxx\"),\n                ans: Yup.string().min(3).required(\"Q6 unchecked\"),\n            }),\n            question6: Yup.object({\n                name:Yup.string().required(\"xxx\"),\n                ans: Yup.string().min(3).required(\"Q7 unchecked\"),\n            }),\n            question7: Yup.object({\n                name:Yup.string().required(\"xxx\"),\n                ans: Yup.string().min(3).required(\"Q8 unchecked\"),\n            }),\n            question8: Yup.object({\n                name:Yup.string().required(\"xxx\"),\n                ans: Yup.string().min(3).required(\"Q9 unchecked\"),\n            }),\n            question9: Yup.object({\n                name:Yup.string().required(\"xxx\"),\n                ans: Yup.string().min(3).required(\"Q10 unchecked\"),\n            }),\n        }),\n        onSubmit: async values => {\n            let millis = Date.now() - entryTime\n            let temMap = new Map()\n\n            for (let i =0; i<10; i++){\n                temMap.set(values[\"question\"+i].name,values[\"question\"+i].ans)//assign value\n                // console.log(temMap.get(values[\"question\"+i].name))\n                formik.touched[\"question\"+i]= false;//reset formik values\n            }\n            temMap.set(\"id\",nanoid(11))\n            temMap.set(\"time\",millis/1000)\n            // setForm({time:millis,ip:\"8.8.8.8\", qMap:temMap});\n\n            Object.keys(formik.initialValues).forEach(//reset formik values\n                function(key){\n                    formik.initialValues[key].ans = \" \"\n                    formik.initialValues[key].name = \" \"\n                }\n            );\n\n            //http://localhost:5001\n            await fetch(\"/question/add\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                },\n                body: JSON.stringify(Object.fromEntries(temMap)),\n            })\n                .catch(error => {\n                    window.alert(error);\n                    return;\n                });\n\n            alert(\"Thank you, we have received your answer!\")\n            alert(JSON.stringify(Object.fromEntries(temMap), null, 2));//\n\n            // alert(JSON.stringify(form, null, 2));\n\n            setFuns.forEach(func => {\n                func('')\n            })\n\n            navigate(\"/\")//back to home page after submit\n        },\n    });\n\n    let [selectedID0, setID0] = React.useState(\"\");\n    let [selectedID1, setID1] = React.useState(\"\");\n    let [selectedID2, setID2] = React.useState(\"\");\n    let [selectedID3, setID3] = React.useState(\"\");\n    let [selectedID4, setID4] = React.useState(\"\");\n    let [selectedID5, setID5] = React.useState(\"\");\n    let [selectedID6, setID6] = React.useState(\"\");\n    let [selectedID7, setID7] = React.useState(\"\");\n    let [selectedID8, setID8] = React.useState(\"\");\n    let [selectedID9, setID9] = React.useState(\"\");\n\n    let setFuns = [setID0, setID1, setID2, setID3,setID4,setID5,setID6,setID7,setID8,setID9]\n    let selectedIDs = [selectedID0, selectedID1, selectedID2, selectedID3,selectedID4,selectedID5,selectedID6,selectedID7,selectedID8,selectedID9]\n\n    function Question(props) {\n        return (\n            <Form.Group  controlId=\"formBasicEmail\">\n                <Form.Label className=\"qTitle\" >\n                    Q{props.qId+1}: {props.descri}\n                    { (formik.values[\"question\"+props.qId].ans<3) && formik.touched[\"question\"+props.qId] ? (\n                        <Badge pill bg=\"danger\">\n                            Q{props.qId+1} unchecked\n                            {/*{formik.errors.question0.ans}*/}\n                        </Badge>\n                    ) : null}\n                </Form.Label>\n\n                <Container className=\"qCard\">\n                    <Row  sm={4} md={4}>\n                        {['Strongly Agree','Agree','Slightly Agree' , 'Neutral', 'Slightly Disagree', 'Disagree', 'Strongly Disagree'].map((ques) => (\n                            <Col key={`${ques}+${props.qId}`} >\n                                <Form.Check\n                                    type=\"radio\"\n                                    id={`${ques}+${props.qId}`}\n                                    name={`${ques}+${props.qId}`}\n                                    label={`${ques}`}//+${props.selectId}\n                                    checked={ques+props.qId === props.selectId}\n                                    onChange={ () => {\n                                        // formik.values[\"sq\"+props.qId]= ques;\n                                        formik.values[\"question\"+props.qId].name = props.qName//+props.qId\n                                        formik.values[\"question\"+props.qId].ans = ques\n                                        setFuns[props.qId](ques+props.qId);\n                                    }}\n                                />\n                            </Col>\n                        ))}\n                    </Row>\n                </Container>\n            </Form.Group>\n        )\n    }\n\n    const [questions, setQuestions] = useState([]);\n    let firstLoad = true;\n    // This method fetches the records from the database.\n    useEffect(() => {\n        if(!firstLoad){\n            return;\n        }\n        setEntryTime(Date.now())\n        firstLoad = false;\n        async function getQuestions() {\n            const response = await fetch(`/questionlist/`);//http://localhost:5001\n            if (!response.ok) {\n                const message = `An error occured: ${response.statusText}`;\n                window.alert(message);\n                return;\n            }\n            const records = await response.json();\n            shuffleArray(records);\n            setQuestions(records.slice(0,10));\n        }\n        getQuestions();\n\n        return;\n    }, [questions.length]);\n\n    function shuffleArray(array) {\n        for (var i = array.length - 1; i > 0; i--) {\n            var j = Math.floor(Math.random() * (i + 1));\n            var temp = array[i];\n            array[i] = array[j];\n            array[j] = temp;\n        }\n    }\n\n    function QuestionList() {\n        return questions.map((question,index) => {\n            return (\n                <Question\n                    descri={question.questiontext}\n                    key={question._id}\n                    qId={index}\n                    qName={question.varname}\n                    selectId = {selectedIDs[index++]}\n                />\n            );\n        });\n    }\n\n    function uncheckedQues({}){\n        return(\n            <Container>\n                {[0,1,2,3,4,5,6,7,8,9].map((index)=>{\n                    return formik.values[\"question\"+index].ans.length < 3 && formik.touched[\"question\"+index] ? (\n                        <Badge key={index+1} pill className=\"col mx-1 \" pill bg=\"danger\">\n                            Q{index+1} unchecked\n                        </Badge>\n                    ) : null\n                })}\n            </Container>\n        )\n    }\n\n    return(\n        <div>\n            <Button  className=\"btnBack\" variant=\"outline-success\" onClick={()=> navigate(\"/\")}> Back Home</Button>\n            <Form  className=\"col-sm-12 col-md-12 mx-2\" onSubmit={formik.handleSubmit}>\n              <Stack gap={2}>\n                  {QuestionList()}\n                  {uncheckedQues({formik})}\n                  <Button variant=\"outline-success\" className=\"col-4 mx-auto my-4 \"  type=\"submit\">Submit</Button>\n            </Stack>\n            </Form>\n        </div>\n    )\n\n\n}"]},"metadata":{},"sourceType":"module"}